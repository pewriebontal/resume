\documentclass[10.5pt,a4paper]{article}

% --- PACKAGES ---
\usepackage[margin=0.4in]{geometry}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{hyperref}
\usepackage{fontspec}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{fontawesome}
\usepackage{pagecolor}
$if(fontfamily)$
  \usepackage[$for(fontfamilyoptions)$$fontfamilyoptions$$sep$,$endfor$]{$fontfamily$}
$endif$

% --- FONT & COLOR DEFINITIONS ---
\setmainfont{Aptos} % {Georgia}
\newfontfamily{\helveticabold}{Helvetica}
\definecolor{sectioncolor}{RGB}{0, 102, 204}
\definecolor{linkcolor}{RGB}{0, 0, 0}
% \definecolor{paperbg}{RGB}{255, 255, 250} % Ivory

% --- LAYOUT & SPACING ---
\titleformat{\section}
  {\large\bfseries\color{sectioncolor}}
  {\thesection}
  {1em}
  {}
  [\titlerule]
\titleformat{\subsection}
  {\bfseries}
  {\thesubsection}
  {1em}
  {}
\titlespacing*{\section}{0pt}{2pt}{1pt}
\titlespacing*{\subsection}{0pt}{2pt}{1pt}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.05em}
\setlist{topsep=1pt, parsep=0pt, itemsep=0.5pt, partopsep=0pt}
\setlist[itemize]{label={\textbullet}}
\renewcommand{\baselinestretch}{1.1}

% --- HYPERREF SETUP ---
\hypersetup{
  pdftitle={$name$'s Resume},
  pdfauthor={$name$},
  pdfsubject={IT Undergraduate Resume | Systems Programming, Full-Stack Development, AI Specialist},
  pdfkeywords={
    $name$, Kai, IT Undergraduate, Student Mentor, Software Engineer, Systems Programmer, 
    Full-Stack Developer, AI Developer, Go, Golang, Python, C, C++, ANSI C, Java, C-Sharp, 
    Dart, JavaScript, TypeScript, SQL, Shell, Bash, FastAPI, React.js, Node.js, SQLAlchemy, 
    Celery, Flask, Tailwind CSS, Dotnet, MAUI, Flutter, LlamaIndex, Riverpod, Material Design 3, 
    AI, Artificial Intelligence, LLM, Large Language Models, RAG, Retrieval-Augmented Generation, 
    YOLO, Object Detection, Llama, Fine-tuning, NLP, MySQL, SQLite, Redis, ChromaDB, Vector DB, 
    SQL Server, Relational Databases, NoSQL, Systems Programming, Low-level Programming, 
    Memory Management, Pointer Arithmetic, Bash Scripting, Linux, Unix, Docker, Git, Version Control, 
    CI/CD, Make, GDB, Valgrind, Web Servers, Vercel, Lexer, Tokenizer, Parser, Piping, I/O, Signals, 
    Job Control, Benchmarking, Data Structures, Algorithms, DSA, OOP, Object-Oriented Programming, 
    API Design, REST API, JWT, Microservices, Async Processing, Caching, Web Scraping, 
    Offline Caching, Push Notifications, Custom Graphics, Physics, DFS, CLI, Natural Language, 
    AI Chat, Mobile App, Meditation App, C Library, UNIX Shell, PDF Converter, 2D Game, 
    Problem-Solving, Meticulous, Teamwork, Communication, Adaptability, Singapore, 
    University of Newcastle, SUTD, Ã‰cole 42, PSB Academy, resume, technical resume, 
    software development, IT
  },
  pdflang={en-US},
  pdfcreator={LaTeX with hyperref package},
  pdfproducer={pdfTeX}, 
  unicode=true,
  pdffitwindow=true,
  pdfstartview={FitH},
  pdfnewwindow=true,       
  pdfpagemode={UseOutlines},  
  bookmarks=true,
  bookmarksopen=true,
  bookmarksnumbered=true,
  bookmarkstype=toc,
  colorlinks=true,     
  anchorcolor=black,
  breaklinks=true,            
  linktoc=all,
  linkcolor=linkcolor,
  filecolor=linkcolor,
  urlcolor=linkcolor,
  hidelinks=false,
  pdfborderstyle={/S/U/W 1},
}

% --- CUSTOM COMMANDS & ENVIRONMENTS ---
\newcommand{\daterange}[1]{\textbf{#1}}
\newcommand{\entryHeader}[2]{\noindent\textbf{#1} \hfill \daterange{#2}}
\newcommand{\entryHeaderLinked}[3]{\noindent\textbf{\href{#1}{#2}} \hfill \daterange{#3}}
\newcommand{\entrySubHeader}[1]{\textit{#1}}
\newcommand{\entrySubHeaderLinked}[2]{\textit{\href{#1}{#2}}}

\newenvironment{entryDetails}
  {%
    \begin{itemize}[leftmargin=2.5em, rightmargin=2.5em, itemsep=0.5pt, topsep=1pt, parsep=0pt]
  }
  {%
    \end{itemize}
    \vspace{-0.1cm}
  }

% --- DOCUMENT START ---
\AtBeginDocument{\thispagestyle{empty}}

\begin{document}
% \pagecolor{paperbg}

% --- HEADER ---
\begin{center}
	{\Huge \textbf{\helveticabold $name$} $if(nickname)$(\helveticabold $nickname$)$endif$} \\
	\vspace{2pt}
	\begin{tabular}{@{}c@{}}
		$if(email)$\href{mailto:$email$}{$email$}$endif$
		$if(mobile_raw)$ \quad|\quad \href{https://wa.me/$country_code$$mobile_raw$}{WhatsApp: +$country_code$ $mobile_display$}$else$ \quad|\quad Contact-on-request$endif$
		$if(location)$ \quad|\quad $location$$endif$                                                          \\[2pt]
		$if(portfolio)$\href{https://$portfolio$?utm_source=resume & utm_medium=document}{$portfolio$}$endif$
		$if(linkedin)$ \quad|\quad \href{https://www.linkedin.com/in/$linkedin$}{linkedin.com/in/$linkedin$}$endif$
		$if(github)$ \quad|\quad \href{https://github.com/$github$}{github.com/$github$}$endif$
	\end{tabular}
\end{center}

% --- 1. OBJECTIVE ---
$if(objective)$
{\large\bfseries\color{sectioncolor}Objective:} \normalfont{$objective$}
\vspace{3pt}
$endif$

% --- 2. SUMMARY ---
$if(summary)$
\section*{Summary}
$summary$
$endif$

% --- 3. EXPERIENCE ---
$if(experience)$
\section*{Experience}
$for(experience)$
$if(experience.company_url)$
\entryHeaderLinked{$experience.company_url$}{$experience.company$}{$experience.period$}
$else$
\entryHeader{$experience.company$}{$experience.period$}
$endif$
\\
$if(experience.title_url)$
\entrySubHeaderLinked{$experience.title_url$}{$experience.title$}
$else$
\entrySubHeader{$experience.title$}
$endif$
\begin{entryDetails}
	$for(experience.details)$
	\item $experience.details$
	$endfor$
\end{entryDetails}
$endfor$
$endif$

% --- 4. SKILLS ---
$if(skills)$
\section*{Skills}
\begin{multicols}{2}
	\raggedcolumns
	$for(technical_items)$
	\noindent\textbf{$technical_items.name$:} $technical_items.description$\\[1.5pt]
	$endfor$
	$if(professional_items)$
	\noindent\textbf{Soft Skills:} $for(professional_items)$$professional_items.name$$sep$, $endfor$
	$endif$
\end{multicols}
\vspace{-1.5ex}
$endif$

% --- 5. PROJECTS ---
$if(projects)$
\section*{Projects}
$for(projects)$
\noindent\textbf{$if(projects.url)$\href{$projects.url$}{$projects.name$}$else$$projects.name$$endif$}$if(projects.tools)$ \quad|\quad \textit{\small $projects.tools$}$endif$ \hfill \textbf{$if(projects.institution_url)$\href{$projects.institution_url$}{$projects.institution$}$else$\textit{$projects.institution$}$endif$}
\begin{entryDetails}
	$for(projects.details)$
	\item $projects.details$
	$endfor$
\end{entryDetails}
$endfor$
$endif$

% --- 6. EDUCATION ---
$if(education)$
\section*{Education}
$for(education)$
$if(education.institution_url)$
\entryHeaderLinked{$education.institution_url$}{$education.institution$}{$education.period$}
$else$
\entryHeader{$education.institution$}{$education.period$}
$endif$
\\
$if(education.degree_url)$
\entrySubHeaderLinked{$education.degree_url$}{$education.degree$}
$else$
\entrySubHeader{$education.degree$}
$endif$
$if(education.details)$
\begin{itemize}[leftmargin=1.5em, rightmargin=1em, itemsep=0.5pt, topsep=1pt, parsep=0pt]
	$for(education.details)$
	\item $education.details$
	      $endfor$
\end{itemize}
\vspace{-0.1cm}
$endif$
$endfor$
$endif$

% --- 7. VOLUNTEER & EXTRACURRICULAR ---
$if(extracurricular)$
\section*{Volunteer \& Extracurricular Experience}
$for(extracurricular)$
\noindent\textbf{$if(extracurricular.position_url)$\href{$extracurricular.position_url$}{$extracurricular.position$}$else$$extracurricular.position$$endif$}, $extracurricular.organization$ \hfill \daterange{$extracurricular.period$}
\begin{entryDetails}
	$for(extracurricular.details)$
	\item $extracurricular.details$
	$endfor$
\end{entryDetails}
$endfor$
$endif$

% --- 8. LANGUAGES ---
$if(languages)$
\section*{Languages}
\begin{entryDetails}
	$for(languages)$
	\item \textbf{$languages.name$}: $languages.level$
	$endfor$
\end{entryDetails}
$endif$

% --- 9. REFERENCES ---
$if(references)$
\section*{References}
\begin{multicols}{3}
	\raggedcolumns
	$for(references)$
	\noindent
	\begin{minipage}[t]{\linewidth}
		\textbf{$references.name$}\\
		$if(references.title)$%
		\textit{$references.title$}\\
		$endif$%
		$if(references.subtitle)$%
		\textit{$references.subtitle$}\\
		$endif$%
		\href{mailto:$references.contact$}{$references.contact$}%
	\end{minipage}\par
	\vspace{4pt}
	$endfor$
\end{multicols}
$endif$

% --- FOOTER ---
\vfill
\begin{center}
	\footnotesize{Updated \today}
\end{center}

\end{document}